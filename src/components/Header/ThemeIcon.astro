<button
	id="themeToggle"
	class="absolute top-2 right-3 z-10"
	aria-label="Toggle theme"
>
	<svg
		aria-hidden="true"
		width="18px"
		xmlns="http://www.w3.org/2000/svg"
		viewBox="0 0 24 24"
		fill="none"
		stroke="currentColor"
		stroke-width="2"
		stroke-linecap="round"
		stroke-linejoin="round"
	>
		<path
			class="sun"
			d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"
		/>
		<path class="moon" d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
		<path
			class="system"
			d="M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11ZM7 21h10M12 18v3"
		/>
	</svg>
</button>

<style is:global>
	#themeToggle {
		border: 0;
		background: none;
		cursor: pointer;
		padding: 0.5rem;
		border-radius: 0.5rem;
		color: currentColor;
	}
	#themeToggle:hover {
		background-color: rgba(0, 0, 0, 0.05);
	}
	[data-theme="dark"] #themeToggle:hover {
		background-color: rgba(255, 255, 255, 0.1);
	}

	.sun,
	.moon,
	.system {
		display: none;
	}

	[data-theme-selection="light"] .sun {
		display: block;
	}
	[data-theme-selection="dark"] .moon {
		display: block;
	}
	[data-theme-selection="system"] .system {
		display: block;
	}
</style>

<script>
	import { toggleTheme } from "../../utils/theme.ts";

	function setupThemeToggle() {
		const toggle = document.getElementById("themeToggle");
		if (toggle) {
			toggle.addEventListener("click", toggleTheme);
		}
	}

	setupThemeToggle();
	document.addEventListener("astro:after-swap", setupThemeToggle);
</script>
