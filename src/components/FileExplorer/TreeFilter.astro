---
import FilterIcon from "../Icons/FilterIcon.astro";
import SearchIcon from "../Icons/SearchIcon.astro";
---

<div class="relative mb-3 flex items-center gap-2">
	<div class="relative flex-1">
		<SearchIcon
			class="absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutral-400 dark:text-neutral-500"
		/>
		<label for="tree-filter" class="sr-only"/>
		<input
			type="text"
			id="tree-filter"
			placeholder="Filter files and folders..."
			class="w-full pl-7 pr-3 py-2 text-sm bg-white dark:bg-neutral-950 border border-neutral-300 dark:border-neutral-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500"
		>
	</div>
	<button
		id="toggle-modified"
		class="p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md border border-neutral-300 dark:border-neutral-700 transition-colors"
		title="Toggle show only modified files"
	>
		<FilterIcon class="m-0.5 w-4 h-4"/>
	</button>
	<script is:inline>
		(() => {
			const toggleButton = document.getElementById("toggle-modified");
			if (!toggleButton) return;

			const storedValue = localStorage.getItem("tree_show_only_modified");
			const showOnlyModified =
				storedValue === null ? true : storedValue !== "false";

			if (showOnlyModified) {
				toggleButton.classList.add(
					"text-neutral-400",
					"dark:text-neutral-500",
				);
			} else {
				toggleButton.classList.add(
					"bg-blue-50",
					"text-blue-600",
					"border-blue-200",
					"dark:bg-blue-900/20",
					"dark:text-blue-400",
					"dark:border-blue-800",
				);
			}
		})();
	</script>
</div>
